# Audioo 快速参考

## 功能总结

### 主要功能
- 🎬 上传视频进行音频处理
- 🎚️ 6 频段均衡器调整
- 🔊 混响效果（干湿混合、房间大小、衰减时间）
- 💾 项目管理（保存、编辑、删除历史项目）
- 📤 导出和分享处理后的视频

### 新增改进

#### 1. 项目管理系统
**Projects Tab**
- 查看所有历史项目（按修改时间排序）
- 编辑按钮：加载项目继续编辑
- 删除按钮：永久删除项目
- 项目参数保存：所有调整自动保存

**创建项目**
- 每次上传视频自动创建新项目
- 项目名称格式：`Project - MMM dd, HH:mm`
- 包含所有均衡器和混响参数

#### 2. 视频上传改进
**两种选择方式**
1. **PhotosPicker** - 点击 "New" 按钮打开相册
2. **DocumentPicker** - 长按 "New" 按钮选择 "Browse Files"

**自动重置**
- 上传新视频时自动重置所有效果
- 避免前一个视频的设置影响新视频

**详细日志**
- Xcode 控制台显示完整的加载过程
- 便于调试和验证

## UI 布局

```
┌─────────────────────────────────┐
│  📤 分享按钮                      │
├─────────────────────────────────┤
│     🎥 视频播放器                │
│   (长宽比 16:9)                  │
├─────────────────────────────────┤
│  🎚️ 音频效果模块                  │
│  • 均衡器（6 频段）               │
│  • 混响（3 参数）                 │
├─────────────────────────────────┤
│  📂       🆕       ⚙️            │
│ Projects  New    Settings       │
└─────────────────────────────────┘
```

## 快速操作

### 上传视频
```
选项 A：点击 "New" → 选择视频
选项 B：长按 "New" → "Browse Files" → 选择视频
选项 C：在视频区域（没有视频时）点击 "Upload a Video"
```

### 调整效果
```
1. 点击均衡器卡片展开频段滑块
2. 左右拖动每个频段调整增益
3. 点击混响卡片展开参数
4. 调整 Mix、Room Size、Decay Time
5. 参数自动保存到项目
```

### 导出视频
```
1. 调整完效果后点击右上角分享按钮
2. 等待视频导出（显示进度条）
3. 选择分享方式
```

### 查看历史项目
```
1. 点击底部 "Projects" 按钮
2. 从列表中选择项目
3. 点击项目的编辑按钮加载
4. 继续编辑项目参数
```

## 参数范围

### 均衡器
| 频段 | 频率 | 范围 |
|------|------|------|
| Bass | 60 Hz | -20~+20 dB |
| Low Mid | 150 Hz | -20~+20 dB |
| Mid Low | 400 Hz | -20~+20 dB |
| Mid | 1000 Hz | -20~+20 dB |
| High Mid | 2400 Hz | -20~+20 dB |
| Treble | 15000 Hz | -20~+20 dB |

### 混响
| 参数 | 范围 | 默认值 |
|------|------|--------|
| Mix | 0-100% | 0% |
| Room Size | 0-1 | 0.5 |
| Decay Time | 0.1-10s | 2.5s |

## 数据位置

```
~/Documents/AudioProjects/
├── {project-id-1}.json
├── {project-id-2}.json
└── ...
```

每个 JSON 文件包含：
- 项目元数据（名称、创建时间、修改时间）
- 视频文件路径
- 所有均衡器参数
- 所有混响参数

## 快捷键和手势

| 操作 | 效果 |
|------|------|
| 点击卡片标题 | 展开/折叠效果参数 |
| 长按 "New" | 打开文件浏览器 |
| 长按项目卡片 | （预留用于上下文菜单） |
| 拖动滑块 | 实时调整参数 |

## 调试技巧

### 查看完整日志
```
1. 打开 Xcode
2. 点击 View → Debug Area → Show Console
3. 查找以下标记的日志：
   ✅ 成功操作
   ❌ 错误
   📊 状态更新
   📹 视频处理
   💾 项目保存
```

### 清除项目数据
```
删除整个 ~/Documents/AudioProjects/ 目录
重启应用
```

### 权限重置
```
设置 → 应用 → Audioo → 相册 → 选择权限
```

## 已知问题与解决方案

| 问题 | 原因 | 解决方案 |
|------|------|---------|
| PhotosPicker 不显示 | 模拟器沙盒问题 | 使用 DocumentPicker |
| 权限被拒 | 未授予相册权限 | 在设置中允许访问 |
| 视频加载缓慢 | 文件大小或系统资源 | 使用较小的视频 |
| 项目未保存 | 未完成加载 | 等待加载进度完成 |

## 版本信息
- 应用版本：1.0
- 最小 iOS 版本：15.0
- 开发工具：Xcode + SwiftUI
